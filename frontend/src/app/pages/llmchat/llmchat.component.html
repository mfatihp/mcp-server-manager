<div class="flex h-full bg-gray-50 dark:bg-gray-900"> <!--[calc(100vh-4rem)]-->
  <!-- Chat Section (Left Side) -->
  <div class="flex flex-col flex-1">
    <!-- Messages Area -->
    <div class="flex-1 overflow-y-auto p-4 space-y-4 max-h-[70vh]">
      <div *ngFor="let msg of messages" 
           [ngClass]="{'text-right': msg.sender === 'user', 'text-left': msg.sender === 'bot'}">
        <div [ngClass]="{
              'bg-blue-600 text-white ml-auto': msg.sender === 'user',
              'bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white mr-auto': msg.sender === 'bot'
            }"
             class="inline-block px-4 py-2 rounded-2xl max-w-xs">
          {{ msg.text }}
        </div>
      </div>
    </div>

    <!-- Input Area -->
    <div class="p-4 bg-gray-100 dark:bg-gray-900">
      <div class="flex items-center bg-white dark:bg-gray-700 rounded-2xl shadow px-3 py-2">
        <input [(ngModel)]="userInput"
               (keyup.enter)="sendMessage()"
               placeholder="Type a message..."
               class="flex-1 bg-transparent px-2 py-2 outline-none 
                      text-gray-900 dark:text-gray-100 placeholder-gray-500 border-none focus:ring-0"/>
        <button (click)="sendMessage()"
                class="ml-2 p-2 rounded-full bg-blue-600 text-white hover:bg-blue-700 transition">
          <svg xmlns="http://www.w3.org/2000/svg" 
               fill="none" viewBox="0 0 24 24" stroke="currentColor"
               class="w-5 h-5">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M5 12h14M12 5l7 7-7 7"/>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Right Sidebar with Tabs -->
  <aside class="w-72 border-l border-gray-300 dark:border-gray-900 flex flex-col bg-white dark:bg-gray-900">
      <!-- Tabs -->
      <div class="flex border-b border-gray-200 dark:border-gray-900 px-2 pt-2 space-x-0">
          <button (click)="activeTab = 'servers'"
                  [ngClass]="activeTab === 'servers' 
                  ? 'bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 border-x border-t border-gray-300 dark:border-gray-600' 
                  : 'text-gray-600 dark:text-gray-400 hover:text-blue-500'"
                  class="flex-1 py-2 rounded-t-lg font-medium transition">
          Active Servers
          </button>
          <button (click)="activeTab = 'logs'"
                  [ngClass]="activeTab === 'logs' 
                  ? 'bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 border-x border-t border-gray-300 dark:border-gray-600' 
                  : 'text-gray-600 dark:text-gray-400 hover:text-blue-500'"
                  class="flex-1 py-2 rounded-t-lg font-medium transition">
          Action Logs
          </button>
      </div>

      <!-- Tab Content -->
      <div class="flex-1 overflow-y-auto p-4 border-t border-gray-300 dark:border-gray-700">
          <!-- Active Servers -->
          <div *ngIf="activeTab === 'servers'" class="space-y-2">
              <div *ngFor="let server of servers"
                  class="p-2 rounded-lg border border-gray-200 dark:border-gray-700 
                          bg-gray-50 dark:bg-gray-800 flex justify-between items-center">
                  <span class="font-medium text-gray-800 dark:text-gray-200">{{ server.name }}</span>
                  <span class="text-xs px-2 py-1 rounded bg-green-500 text-white">Running</span>
              </div>
          </div>

          <!-- Action Logs -->
          <div *ngIf="activeTab === 'logs'" class="space-y-2">
              <div *ngFor="let log of mcpLogs"
                  class="text-sm text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-700 pb-1">
                  {{ log }}
              </div>
          </div>
      </div>
  </aside>
</div>
