<div class="fixed inset-0 flex items-center justify-center z-50">
  <!-- Shadowy background -->
  <div (click)="cancel()" class="absolute inset-0 bg-black/40"></div>

  <!-- Modal content -->
  <div class="relative bg-white rounded-2xl shadow-lg p-6 w-[900px] max-w-[95%] z-10 flex flex-col h-[600px]">
    <h3 class="text-xl font-semibold mb-2">Create New MCP Server</h3>
    <!-- Top: Main content -->
    <div class="flex-1 flex gap-6 overflow-hidden">
      <!-- Left: Server form -->
      <div class="flex-1 flex flex-col h-full gap-3">
        <input type="text" placeholder="Server Name" class="border rounded p-2 w-full" [(ngModel)]="newServerName" />
        <textarea placeholder="Description" class="border rounded p-2 w-full flex-1" [(ngModel)]="newServerDesc"></textarea>
      </div>

      <!-- Right: Radio buttons (top) + Python code (bottom) -->
      <div class="flex-1 flex flex-col gap-3 h-full">
        <!-- Top: Radio buttons -->
        <div class="flex-1 flex flex-col border rounded-lg p-4 bg-gray-50">
          <h4 class="text-gray-700 font-semibold mb-3">Choose MCP server type</h4>
          <div class="flex flex-col gap-2">
            <label class="flex items-center gap-2">
              <input type="radio" name="type" value="tool" [(ngModel)]="servertype" class="form-radio h-5 w-5 text-blue-600">
              Tool
            </label>
            <label class="flex items-center gap-2">
              <input type="radio" name="type" value="resource" [(ngModel)]="servertype" class="form-radio h-5 w-5 text-blue-600">
              Resource
            </label>
          </div>
        </div>

        <!-- Bottom: Python code editor -->
        <div class="flex-1 flex flex-col border rounded-lg p-2 bg-gray-900 text-green-400 font-mono">
          <div class="flex gap-2 mb-2">
            <span>def</span>
            <input type="text" placeholder="function_name" class="flex-1 bg-gray-900 text-green-400 border-b border-green-400 focus:outline-none" [(ngModel)]="codeFunctionName"/>
            <span>(</span>
            <input type="text" placeholder="args" class="flex-1 bg-gray-900 text-green-400 border-b border-green-400 focus:outline-none" [(ngModel)]="codeArgs"/>
            <span>):</span>
          </div>

          <!-- Function body textarea fills remaining space -->
          <textarea
            class="flex-1 w-full resize-none mt-1 bg-gray-900 text-green-300 p-2 overflow-auto"
            [(ngModel)]="codeBody"
            placeholder="# function body"
          ></textarea>
        </div>
      </div>
    </div>

    <!-- Buttons: bottom center of modal -->
    <div class="mt-4 flex justify-center gap-4">
      <button (click)="cancel()" class="px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400">Cancel</button>
      <button (click)="createServer(); cancel()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">Create</button>
    </div>
  </div>
</div>
